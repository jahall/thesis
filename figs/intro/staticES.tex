% Define block styles
\tikzstyle{block} = [rectangle, draw, text width=3em, text centered, rounded corners, minimum height=3em]
\tikzstyle{block2} = [rectangle, draw, text width=3em, text centered, rounded corners, minimum height=2em]
\tikzstyle{sum} = [thick, circle, draw, minimum height=.4cm]
\tikzstyle{line} = [draw, -latex]
\tikzstyle{dot} = [circle, draw, fill=black, inner sep=1pt, thick]
\begin{tikzpicture}[rounded corners]
	\small
	\draw[thick, fill = black!15] (-4,-5.3) rectangle (4,-1.7);
	\draw[thick, fill = black!30] (-2.1,-1) rectangle (2.1,1.3);
	% Place nodes
	\node at (0,0)[block](plant){$g(\psi)$};
	%\node at (-2.5,0)[sblock](iplant){$F_i(s)$};
	%\node at (2.5,0)[sblock](oplant){$F_o(s)$};
	%\node at (5,0)[dot](bit1){};
	\node at (0.5,-4.5)[dot](bit2){};
	\node at (2.5,-3)[block](highpass){$\quad$ \\[-0.75cm]\begin{equation*}\frac{s}{s+h}\end{equation*}};
	\node at (0.5,-3)[sum](mult){}; \node at (0.5,-3) {$\times$};
	\node at (-1.5,-3)[block](int){$\quad$ \\[-0.75cm]\begin{equation*}\frac{k}{s}\end{equation*}};
	\node at (-3.5,-3)[sum](add){}; \node at (-3.2,-2.7) {$-$};
	\node at (-1.5,-4.5)[block2](aaa){$a$};

	% Draw edges
	\path[line] (plant.east) -- (5,0)  |- (highpass.east);
	\path[line] (highpass.west) -- (mult);
	\path[line] (mult) -- (int.east);
	\path[line] (int.west) -- (add);
	\path[line] (add.west)  -| (-5,0) -- (plant.west);
	%\path [line] (plant.east) -- (oplant.west);
	%\path [line] (iplant.east) -- (plant.west);
	
	\path[line] (aaa.west) -| (add.south);
	\path[line] (aaa.east) +(2.6,0) -- (aaa.east);
	\path[line] (bit2) -- (mult.south);
	
	%\path[line] ([xshift=-.4cm]plant.north) +(0,.7) -- ([xshift=-.4cm]plant.north);
	%\path[line] ([xshift=.4cm]plant.north) +(0,.7) -- ([xshift=.4cm]plant.north);
	
	% Labels
	\node at (0,-2.05){\bf Adaptation};
	\node at (0,0.85){\bf Closed-Loop System};
	%\node at (0.45,1.5){$\psi^*$};
	%\node at (-0.35,1.5){$g^*$};
	\node at (2.5,-4.45){$\sin\omega t$};
	\node at (-4.5,-2.7){$\psi$};
	\node at (4.5,-2.7){$y$};
	\node at (-2.6,-2.7){$\hat\psi$};
	\node at (-0.2,-2.7){$\xi$};

\end{tikzpicture}